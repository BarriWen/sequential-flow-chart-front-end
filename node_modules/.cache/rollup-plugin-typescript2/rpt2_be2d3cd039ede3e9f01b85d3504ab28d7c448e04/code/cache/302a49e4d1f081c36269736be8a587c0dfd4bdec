{"code":"import { SimpleEvent } from './simple-event';\r\nexport function race(timeout, a, b) {\r\n    const value = [undefined, undefined];\r\n    const result = new SimpleEvent();\r\n    let scheduled = false;\r\n    function forward() {\r\n        if (scheduled) {\r\n            return;\r\n        }\r\n        scheduled = true;\r\n        setTimeout(() => {\r\n            try {\r\n                result.forward(value);\r\n            }\r\n            finally {\r\n                scheduled = false;\r\n                value.fill(undefined);\r\n            }\r\n        }, timeout);\r\n    }\r\n    [a, b]\r\n        .filter(e => e)\r\n        .forEach((e, index) => {\r\n        e.subscribe(v => {\r\n            value[index] = v;\r\n            forward();\r\n        });\r\n    });\r\n    return result;\r\n}\r\n","references":["/Users/mm/Documents/IntelliProIntern/sequential-flow-chart-front-end/src/core/simple-event.ts"],"dts":{"name":"/Users/mm/Documents/IntelliProIntern/sequential-flow-chart-front-end/build/core/simple-event-race.d.ts","writeByteOrderMark":false,"text":"import { SimpleEvent } from './simple-event';\r\nexport declare function race<A, B>(timeout: number, a: SimpleEvent<A>, b: SimpleEvent<B>): SimpleEvent<[A?, B?]>;\r\n"}}
